<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
Papa.parse("catalog.csv", {
  download: true,
  header: true,
  complete: (results) => {
    const data = results.data.filter(r => r.catalog && r.name);
    const catalogs = [...new Set(data.map(d => d.catalog))];

    const grid = document.getElementById('catalogGrid');
    catalogs.forEach(cat => {
      const sample = data.find(d => d.catalog === cat && d.image);
      const img = sample ? sample.image : 'https://placehold.co/600x900?text='+encodeURIComponent(cat);
      const pdf = sample.pdf;
      const card = document.createElement('div');
      card.className = 'catalog-card';
      card.innerHTML = `
        <img src="${img}" alt="${cat}">
        <div class="catalog-footer">
          <h3>${cat}</h3>
          <p>Каталог напитков</p>
        </div>`;
      card.onclick = () => {
        if (pdf) window.open(pdf, '_blank');
        else window.location.href = 'catalog.html?name=' + encodeURIComponent(cat);
      };
      grid.appendChild(card);
    });
  }
});
</script>
